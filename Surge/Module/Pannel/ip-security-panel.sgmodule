#!name=IP Security Monitor
#!desc=æ˜¾ç¤º IP é£é™©è¯„åˆ†ã€ç±»å‹ã€DNS æ³„éœ²æ£€æµ‹ã€ä»£ç†ç­–ç•¥å’Œæœ¬åœ°/å…¥å£/å‡ºå£ IP åœ°ç†ä¿¡æ¯ï¼Œæ”¯æŒç½‘ç»œå˜åŒ–è‡ªåŠ¨é€šçŸ¥
#!author=HotKids&ChatGPT&Claude
#!system=ios
#!arguments=ipqs_key:null,risk_api:null,local_geoapi:bilibili,remote_geoapi:ipinfo,mask_ip:0,tw_flag:cn,event_delay:2
#!arguments-desc=ipqs_key:(å¯é€‰) IPQualityScore API Keyï¼Œä»… risk_api=ipqs æˆ–å›è½æ¨¡å¼éœ€è¦\nrisk_api:(å¯é€‰) é£é™©è¯„åˆ†æ•°æ®æºï¼Œipqs / proxycheck / ippure / scamalyticsï¼Œä¸å¡«åˆ™å››çº§å›è½ï¼ˆIPQS â†’ ProxyCheck â†’ IPPure â†’ Scamalyticsï¼‰\nlocal_geoapi:(å¯é€‰) æœ¬åœ° IP åœ°ç†æ•°æ®æºï¼Œbilibili=bilibili(ä¸­æ–‡ï¼Œé»˜è®¤)ï¼Œipsb=ip.sb(è‹±æ–‡)\nremote_geoapi:(å¯é€‰) å…¥å£/å‡ºå£åœ°åŒºæ•°æ®æºï¼ˆä»…å½±å“åœ°åŒºï¼Œè¿è¥å•†å§‹ç»ˆç”¨ ipinfo.ioï¼‰ï¼Œipinfo=ipinfo.io(é»˜è®¤)ï¼Œipapi=ip-api.com(è‹±æ–‡)ï¼Œipapi-zh=ip-api.com(ä¸­æ–‡)\nmask_ip:(å¯é€‰) IP æ‰“ç ï¼Œ1=å¼€å¯ï¼ˆ123.*.*.89ï¼‰ï¼Œ0=å…³é—­ï¼Œé»˜è®¤ 0\ntw_flag:(å¯é€‰) å°æ¹¾åœ°åŒºæ——å¸œï¼Œcn=ğŸ‡¨ğŸ‡³(é»˜è®¤)ï¼Œtw=ğŸ‡¹ğŸ‡¼\nevent_delay:(å¯é€‰) ç½‘ç»œå˜åŒ–åå»¶è¿Ÿæ£€æµ‹æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 2 ç§’

[Panel]
ip-security-panel = script-name=ip-security-panel,update-interval=600

[Script]
# é¢æ¿æ‰‹åŠ¨è§¦å‘
ip-security-panel = type=generic,timeout=15,script-path=https://raw.githubusercontent.com/HotKids/Rules/master/Surge/Module/Scripts/ip-security.js,argument=ipqs_key={{{ipqs_key}}}&risk_api={{{risk_api}}}&local_geoapi={{{local_geoapi}}}&remote_geoapi={{{remote_geoapi}}}&mask_ip={{{mask_ip}}}&tw_flag={{{tw_flag}}}

# ç½‘ç»œå˜åŒ–è‡ªåŠ¨è§¦å‘
ip-security-event = type=event,event-name=network-changed,timeout=15,script-path=https://raw.githubusercontent.com/HotKids/Rules/master/Surge/Module/Scripts/ip-security.js,argument=TYPE=EVENT&ipqs_key={{{ipqs_key}}}&risk_api={{{risk_api}}}&local_geoapi={{{local_geoapi}}}&remote_geoapi={{{remote_geoapi}}}&mask_ip={{{mask_ip}}}&tw_flag={{{tw_flag}}}&event_delay={{{event_delay}}}
